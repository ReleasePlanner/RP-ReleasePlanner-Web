# Dockerfile para desarrollo de React con hot-reload
FROM node:20-alpine

# Establecer directorio de trabajo en la raíz del workspace
WORKDIR /app

# Copiar archivos de configuración de dependencias del workspace
COPY package*.json ./
COPY nx.json ./
COPY tsconfig.base.json ./

# Instalar todas las dependencias (incluyendo dev dependencies)
RUN npm ci

# Exponer puerto 5173 (Vite default)
EXPOSE 5173

# Comando por defecto (puede ser sobrescrito en docker-compose)
# Se ejecuta desde la raíz del workspace usando nx
CMD ["npx", "nx", "serve", "portal", "--host", "0.0.0.0", "--port", "5173"]

